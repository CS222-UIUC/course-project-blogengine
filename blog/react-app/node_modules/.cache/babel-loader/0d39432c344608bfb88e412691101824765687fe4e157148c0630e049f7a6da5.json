{"ast":null,"code":"import _slicedToArray from\"/Users/Amy1/programFiles/cs222/course-project-blogengine/blog/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import DOMPurify from'dompurify';import{Renderer,parse}from'marked';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Post(){console.log(\"in the post\");var _useParams=useParams(),slug=_useParams.slug;// Get the slug parameter from the URL\nvar _useState=useState({title:'',content:''}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];console.log(slug);useEffect(function(){fetch(\"/posts/\".concat(slug))// Make a GET request to the server to get the blog post with the specified slug\n.then(function(res){return res.json();}).then(function(data){return setPost(data);});},[slug]);var customRenderer=new Renderer();customRenderer.image=function(href,title,text){var match=text.match(/(?<=\\|)\\s*(\\d+)\\s+(\\d+)/);var match1=text.match(/(?<=\\|)\\s*(?:0*\\.)?\\d+(?:\\.\\d+)?/);// /^\\d+(\\.\\d+)?$/ /(?<!\\d)0*(\\d*)(?:\\.(\\d+))?/\nif(match){var width=match[1]+'px';var height=match[2]+'px';text=text.replace(\"|\"+match[0],'').trim();var style=\"width: \".concat(width,\"; height: \").concat(height,\";\");return\"<img src=\\\"\".concat(href,\"\\\" alt=\\\"\").concat(text,\"\\\" title=\\\"\").concat(title,\"\\\" style=\\\"\").concat(style,\"\\\">\");}else if(match1){var img=new Image();img.src=href;console.log(match1);var origWidth=img.naturalWidth;var origHeight=img.naturalHeight;var scale=match1[0];var newWidth=origWidth*scale;var newHeight=origHeight*scale;text=text.replace(\"|\"+match1[0],'').trim();var _style=\"width: \".concat(newWidth,\"px; height: \").concat(newHeight,\"px;\");img.remove();return\"<img src=\\\"\".concat(href,\"\\\" alt=\\\"\").concat(text,\"\\\" title=\\\"\").concat(title,\"\\\" style=\\\"\").concat(_style,\"\\\">\");}else{console.log(\"IM HERE\");return\"<img src=\\\"\".concat(href,\"\\\" alt=\\\"\").concat(text,\"\\\" title=\\\"\").concat(title,\"\\\">\");}};var renderText=function renderText(content){var html=parse(content,{renderer:customRenderer});var sanitizedHtml=DOMPurify.sanitize(html);return{__html:sanitizedHtml};};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:post.title}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:renderText(post.content)})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","DOMPurify","Renderer","parse","jsx","_jsx","jsxs","_jsxs","Post","console","log","_useParams","slug","_useState","title","content","_useState2","_slicedToArray","post","setPost","fetch","concat","then","res","json","data","customRenderer","image","href","text","match","match1","width","height","replace","trim","style","img","Image","src","origWidth","naturalWidth","origHeight","naturalHeight","scale","newWidth","newHeight","remove","renderText","html","renderer","sanitizedHtml","sanitize","__html","children","dangerouslySetInnerHTML"],"sources":["/Users/Amy1/programFiles/cs222/course-project-blogengine/blog/react-app/src/Post.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DOMPurify from 'dompurify';\nimport { Renderer, parse } from 'marked';\n\nexport default function Post() {\n    console.log(\"in the post\");\n  const { slug } = useParams(); // Get the slug parameter from the URL\n  const [post, setPost] = useState({ title: '', content: '' });\n\n  console.log(slug);\n\n  useEffect(() => {\n    fetch(`/posts/${slug}`) // Make a GET request to the server to get the blog post with the specified slug\n      .then((res) => res.json())\n      .then((data) => setPost(data));\n  }, [slug]);\n\n  const customRenderer = new Renderer();\n    customRenderer.image = function(href, title, text) {\n        const match = text.match(/(?<=\\|)\\s*(\\d+)\\s+(\\d+)/);\n        const match1 = text.match(/(?<=\\|)\\s*(?:0*\\.)?\\d+(?:\\.\\d+)?/); // /^\\d+(\\.\\d+)?$/ /(?<!\\d)0*(\\d*)(?:\\.(\\d+))?/\n        if (match) {\n          const width = match[1] + 'px';\n          const height = match[2] + 'px';\n          text = text.replace(\"|\" + match[0], '').trim();\n          const style = `width: ${width}; height: ${height};`;\n          return `<img src=\"${href}\" alt=\"${text}\" title=\"${title}\" style=\"${style}\">`;\n        } else if (match1) {\n          const img = new Image();\n          img.src = href;\n          console.log(match1);\n          const origWidth = img.naturalWidth;\n          const origHeight = img.naturalHeight;\n\n          const scale = match1[0];\n          const newWidth = origWidth * scale;\n          const newHeight = origHeight * scale;\n          text = text.replace(\"|\" + match1[0], '').trim();\n          const style = `width: ${newWidth}px; height: ${newHeight}px;`;\n\n          img.remove();\n\n          return `<img src=\"${href}\" alt=\"${text}\" title=\"${title}\" style=\"${style}\">`;\n        } else {\n          console.log(\"IM HERE\");\n\n          return `<img src=\"${href}\" alt=\"${text}\" title=\"${title}\">`;\n        }\n    };\n\n    const renderText = (content) => {\n        const html = parse(content, {renderer: customRenderer});\n        const sanitizedHtml = DOMPurify.sanitize(html);\n        return { __html: sanitizedHtml };\n    };\n\n  return (\n    <div>\n      <h1>{post.title}</h1>\n      <div dangerouslySetInnerHTML={renderText(post.content)}></div>\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
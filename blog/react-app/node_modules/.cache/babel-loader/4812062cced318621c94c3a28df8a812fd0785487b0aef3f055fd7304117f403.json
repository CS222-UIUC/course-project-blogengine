{"ast":null,"code":"import _slicedToArray from\"/Users/Amy1/programFiles/cs222/course-project-blogengine/blog/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./Posts.css';import DOMPurify from'dompurify';import{Renderer,parse}from'marked';// import axios from \"axios\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";console.log(\"in posts\");export default function Posts(){console.log(\"in in posts\");var _useState=useState([{title:'',content:''}]),_useState2=_slicedToArray(_useState,2),blogs=_useState2[0],setBlogs=_useState2[1];useEffect(function(){fetch(\"/getposts\").then(function(res){if(res.ok){return res.json();}}).then(function(jsonRes){return setBlogs(jsonRes);});});// const postSlug = slugify(postTitle, {\n//     lower: true, // Convert to lowercase\n//     strict: true, // Replace special characters with dashes\n// });\nvar customRenderer=new Renderer();customRenderer.image=function(href,title,text){var match=text.match(/(?<=\\|)\\s*(\\d+)\\s+(\\d+)/);var match1=text.match(/(?<=\\|)\\s*(?:0*\\.)?\\d+(?:\\.\\d+)?/);// /^\\d+(\\.\\d+)?$/ /(?<!\\d)0*(\\d*)(?:\\.(\\d+))?/\nif(match){var width=match[1]+'px';var height=match[2]+'px';text=text.replace(\"|\"+match[0],'').trim();var style=\"width: \".concat(width,\"; height: \").concat(height,\";\");return\"<img src=\\\"\".concat(href,\"\\\" alt=\\\"\").concat(text,\"\\\" title=\\\"\").concat(title,\"\\\" style=\\\"\").concat(style,\"\\\">\");}else if(match1){var img=new Image();img.src=href;console.log(match1);var origWidth=img.naturalWidth;var origHeight=img.naturalHeight;var scale=match1[0];var newWidth=origWidth*scale;var newHeight=origHeight*scale;text=text.replace(\"|\"+match1[0],'').trim();var _style=\"width: \".concat(newWidth,\"px; height: \").concat(newHeight,\"px;\");img.remove();return\"<img src=\\\"\".concat(href,\"\\\" alt=\\\"\").concat(text,\"\\\" title=\\\"\").concat(title,\"\\\" style=\\\"\").concat(_style,\"\\\">\");}else{console.log(\"IM HERE\");return\"<img src=\\\"\".concat(href,\"\\\" alt=\\\"\").concat(text,\"\\\" title=\\\"\").concat(title,\"\\\">\");}};var renderText=function renderText(content){var html=parse(content,{renderer:customRenderer});var sanitizedHtml=DOMPurify.sanitize(html);var shorter_html=html.length>100?html.substring(0,100)+\"...\":html;return{__html:shorter_html};// const html = parse(content, { sanitize: true });\n// const shorter_html = html.length > 100 ? html.substring(0, 100) + \"...\" : html;\n// return { __html: shorter_html };\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{id:\"header\",children:\"Posts\"}),blogs.map(function(blog){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/posts/\".concat(blog.slug),className:\"nowrap-title\",children:blog.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"snippet\",children:[/*#__PURE__*/_jsx(\"p\",{dangerouslySetInnerHTML:renderText(blog.content)}),/*#__PURE__*/_jsxs(Link,{to:\"/posts/\".concat(blog.slug),className:\"nowrap-body\",children:[blog.content.length>100?\"Read more\":\"Go to post\",\" \"]})]})]});})]})// <div className='container'>\n//     <h1>Posts</h1>\n//         {blogs.map(blog => \n//             <div>\n//                 <h1>{blog.title}</h1>\n//                 <p>{blog.content}</p>\n//                 <Link to={`/posts/${blog.slug}`}>Read More</Link> {/* Use the Link component to link to the individual blog post page */}\n//             </div>\n//         )}\n// </div>\n;}// <Link to={`/posts/${blog.slug}`} className=\"nowrap-body\">\n// {blog.content.length > 100 ? \"Read more\" : \"Go to post\"}{\" \"}\n// {/* <i className=\"fas fa-arrow-circle-right\"></i> */}\n// </Link>","map":{"version":3,"names":["React","useState","useEffect","Link","DOMPurify","Renderer","parse","jsx","_jsx","jsxs","_jsxs","console","log","Posts","_useState","title","content","_useState2","_slicedToArray","blogs","setBlogs","fetch","then","res","ok","json","jsonRes","customRenderer","image","href","text","match","match1","width","height","replace","trim","style","concat","img","Image","src","origWidth","naturalWidth","origHeight","naturalHeight","scale","newWidth","newHeight","remove","renderText","html","renderer","sanitizedHtml","sanitize","shorter_html","length","substring","__html","children","id","map","blog","className","to","slug","dangerouslySetInnerHTML"],"sources":["/Users/Amy1/programFiles/cs222/course-project-blogengine/blog/react-app/src/Posts.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Link } from 'react-router-dom';\nimport './Posts.css';\nimport DOMPurify from 'dompurify';\nimport { Renderer, parse } from 'marked';\n\n// import axios from \"axios\";\n\nconsole.log(\"in posts\");\n\nexport default function Posts() {\n    console.log(\"in in posts\");\n\n    const [blogs, setBlogs] = useState([{\n        title: '',\n        content: ''\n    }])\n\n    useEffect(() => {\n        fetch(\"/getposts\").then(res => {\n            if (res.ok) {\n                return res.json();\n            }\n        }).then(jsonRes => setBlogs(jsonRes));\n    })\n\n    // const postSlug = slugify(postTitle, {\n    //     lower: true, // Convert to lowercase\n    //     strict: true, // Replace special characters with dashes\n    // });\n\n    const customRenderer = new Renderer();\n    customRenderer.image = function(href, title, text) {\n        const match = text.match(/(?<=\\|)\\s*(\\d+)\\s+(\\d+)/);\n        const match1 = text.match(/(?<=\\|)\\s*(?:0*\\.)?\\d+(?:\\.\\d+)?/); // /^\\d+(\\.\\d+)?$/ /(?<!\\d)0*(\\d*)(?:\\.(\\d+))?/\n        if (match) {\n        const width = match[1] + 'px';\n        const height = match[2] + 'px';\n        text = text.replace(\"|\" + match[0], '').trim();\n        const style = `width: ${width}; height: ${height};`;\n        return `<img src=\"${href}\" alt=\"${text}\" title=\"${title}\" style=\"${style}\">`;\n        } else if (match1) {\n        const img = new Image();\n        img.src = href;\n        console.log(match1);\n        const origWidth = img.naturalWidth;\n        const origHeight = img.naturalHeight;\n\n        const scale = match1[0];\n        const newWidth = origWidth * scale;\n        const newHeight = origHeight * scale;\n        text = text.replace(\"|\" + match1[0], '').trim();\n        const style = `width: ${newWidth}px; height: ${newHeight}px;`;\n\n        img.remove();\n\n        return `<img src=\"${href}\" alt=\"${text}\" title=\"${title}\" style=\"${style}\">`;\n        } else {\n        console.log(\"IM HERE\");\n\n        return `<img src=\"${href}\" alt=\"${text}\" title=\"${title}\">`;\n        }\n    };\n\n    const renderText = (content) => {\n        const html = parse(content, {renderer: customRenderer});\n        const sanitizedHtml = DOMPurify.sanitize(html);\n        const shorter_html = html.length > 100 ? html.substring(0, 100) + \"...\" : html;\n        return { __html: shorter_html };\n\n        // const html = parse(content, { sanitize: true });\n        // const shorter_html = html.length > 100 ? html.substring(0, 100) + \"...\" : html;\n        // return { __html: shorter_html };\n    };\n\n    return (\n        <div>\n            <h1 id='header'>Posts</h1>\n            {blogs.map(blog =>\n                <div className='card'>\n                    {/* <div className=\"container-sm\"> */}\n                        <h3>\n                            <Link to={`/posts/${blog.slug}`} className=\"nowrap-title\">\n                                {blog.title}\n                            </Link>\n                        </h3>\n                        <div className=\"snippet\">\n                            {/* <p dangerouslySetInnerHTML={{ __html: blog.body }}></p> */}\n                            {/* <p>{blog.content.length > 100 ? blog.content.substring(0, 100) + \"...\" : blog.content}</p> */}\n                            <p dangerouslySetInnerHTML={renderText(blog.content)}></p>\n                            <Link to={`/posts/${blog.slug}`} className=\"nowrap-body\">\n                                {blog.content.length > 100 ? \"Read more\" : \"Go to post\"}{\" \"}\n                            {/* <i className=\"fas fa-arrow-circle-right\"></i> */}\n                            </Link>\n                        </div>\n                    {/* </div> */}\n                </div>\n            )}\n        </div>\n        // <div className='container'>\n        //     <h1>Posts</h1>\n        //         {blogs.map(blog => \n        //             <div>\n        //                 <h1>{blog.title}</h1>\n        //                 <p>{blog.content}</p>\n        //                 <Link to={`/posts/${blog.slug}`}>Read More</Link> {/* Use the Link component to link to the individual blog post page */}\n        //             </div>\n        //         )}\n        // </div>\n    )\n}\n\n// <Link to={`/posts/${blog.slug}`} className=\"nowrap-body\">\n// {blog.content.length > 100 ? \"Read more\" : \"Go to post\"}{\" \"}\n// {/* <i className=\"fas fa-arrow-circle-right\"></i> */}\n// </Link>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}